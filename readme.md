### тП░ р╣Гр╕Кр╣Й `pm2` + `--cron` р╕гр╕▒р╕Щр╕Хр╕▓р╕бр╣Ар╕зр╕ер╕▓р╕Чр╕╡р╣Ир╕Бр╕│р╕лр╕Щр╕Ф

```bash
pm2 start server.js --name usgs-earthquake-bot --cron "*/10 * * * *"

// ЁЯЪА р╣Ар╕гр╕╡р╕вр╕Бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ
(async () => {
    const now = dayjs().utc();
    const startTime = now.startOf('day').format(); // 00:00:00 UTC
    const endTime = now.format();                 // р╣Ар╕зр╕ер╕▓р╕Ыр╕▒р╕Ир╕Ир╕╕р╕Ър╕▒р╕Щ UTC
    const minMagnitude = 5.0;
    const limit = 5;

    const data = await fetchEarthquakeData({
        startTime,
        endTime,
        minMagnitude,
        limit
    });

    await displayEarthquakeInfo(data);
})();

```

ЁЯТб р╕Хр╕▒р╕зр╕Щр╕╡р╣Йр╕Ир╕░р╣Гр╕лр╣Й `pm2` р╣Ар╕гр╕╡р╕вр╕Б `server.js` р╣Гр╕лр╕бр╣Ир╕Чр╕╕р╕Б 10 р╕Щр╕▓р╕Чр╕╡ (р╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╣Гр╕Кр╣Й loop)

---

## ЁЯзн р╕кр╕гр╕╕р╕Ыр╣Бр╕Щр╕░р╕Щр╕│

| р╕зр╕┤р╕Шр╕╡          | р╕Чр╕│р╕Зр╕▓р╕Щр╕вр╕▒р╕Зр╣Др╕З                 | р╣Ар╕лр╕бр╕▓р╕░р╕кр╕│р╕лр╕гр╕▒р╕Ъ                          |
| ------------- | -------------------------- | ------------------------------------ |
| `setInterval` | р╕гр╕▒р╕Щр╕зр╕Щр╣Гр╕Щ process р╣Ар╕Фр╕╡р╕вр╕з      | р╕Зр╕▓р╕Щр╣Ар╕ер╣Зр╕Б р╣Ж, р╕Ър╕нр╕Чр╕Чр╕╡р╣И online р╕Хр╕ер╕нр╕Ф        |
| `pm2 --cron`  | р╕гр╕▒р╕Щр╣Др╕Яр╕ер╣Мр╣Гр╕лр╕бр╣Ир╕Чр╕╕р╕Бр╕Др╕гр╕▒р╣Йр╕Зр╕Хр╕▓р╕бр╣Ар╕зр╕ер╕▓ | р╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╕Чр╕╡р╣Ир╣Вр╕лр╕ер╕Фр╕Вр╣Йр╕нр╕бр╕╣р╕е, р╕Чр╕│р╕Зр╕▓р╕Щр╣Ар╕Ыр╣Зр╕Щр╕гр╕нр╕Ъ р╣Ж |

---

### ЁЯЫа р╕Чр╕│р╣Гр╕лр╣Й **PM2** р╕гр╕▒р╕Щр╣Ар╕Лр╕┤р╕гр╣Мр╕Яр╣Ар╕зр╕нр╕гр╣Мр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤ (Auto-Start)

PM2 р╣Ар╕Ыр╣Зр╕Щ **Process Manager** р╕кр╕│р╕лр╕гр╕▒р╕Ъ Node.js р╕Чр╕╡р╣Ир╕Кр╣Ир╕зр╕вр╣Гр╕лр╣Йр╣Бр╕нр╕Ыр╕кр╕▓р╕бр╕▓р╕гр╕Цр╕гр╕▒р╕Щр╕Хр╣Ир╕нр╣Др╕Ыр╣Др╕Фр╣Й р╣Бр╕бр╣Йр╕зр╣Ир╕▓р╣Ар╕Лр╕┤р╕гр╣Мр╕Яр╣Ар╕зр╕нр╕гр╣Мр╕Ир╕░р╕гр╕╡р╕кр╕Хр╕▓р╕гр╣Мр╕Ч

---

## ЁЯЪА 1я╕ПтГг р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З PM2

р╕Цр╣Йр╕▓р╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Др╕Фр╣Йр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З PM2 р╣Гр╕лр╣Йр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╕Бр╣Ир╕нр╕Щ:

```bash
npm install -g pm2
```

---

## ЁЯЪА 2я╕ПтГг р╕гр╕▒р╕Щр╣Вр╕Ыр╕гр╣Ар╕Ир╕Др╕Вр╕нр╕Зр╕Др╕╕р╕Ур╕Фр╣Йр╕зр╕в PM2

р╣Гр╕Кр╣Йр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Щр╕╡р╣Йр╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Й PM2 р╕гр╕▒р╕Щ **index.js** р╣Бр╕ер╕░ **server.js** р╕Юр╕гр╣Йр╕нр╕бр╕Бр╕▒р╕Щ:

```bash
pm2 start index.js --name "udp-server"
pm2 start server.js --name "http-server"
```

р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╣Вр╕Ыр╕гр╣Ар╕Лр╕кр╕Чр╕│р╕Зр╕▓р╕Щр╕нр╕вр╕╣р╣И:

```bash
pm2 list
```

---

## ЁЯЪА 3я╕ПтГг р╕Чр╕│р╣Гр╕лр╣Й PM2 р╕гр╕▒р╕Щр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╕лр╕ер╕▒р╕Зр╕гр╕╡р╕Ър╕╣р╕Хр╣Ар╕Лр╕┤р╕гр╣Мр╕Яр╣Ар╕зр╕нр╕гр╣М

р╣Гр╕Кр╣Йр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Щр╕╡р╣Й:

```bash
pm2 save
pm2 startup
```

ЁЯУМ **PM2 р╕Ир╕░р╕кр╕гр╣Йр╕▓р╕Зр╕Др╕│р╕кр╕▒р╣Ир╕Зр╣Гр╕лр╣Йр╕гр╕░р╕Ър╕Ър╕Чр╕│р╕Зр╕▓р╕Щр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╕лр╕ер╕▒р╕Зр╕Ър╕╣р╕Хр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З**  
р╣Гр╕лр╣Йр╕Др╕▒р╕Фр╕ер╕нр╕Бр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Чр╕╡р╣Ир╣Бр╕кр╕Фр╕Зр╕Вр╕╢р╣Йр╕Щр╕бр╕▓ р╣Бр╕ер╣Йр╕зр╕гр╕▒р╕Щр╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З

р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З:

```bash
sudo env PATH=$PATH:/usr/bin pm2 startup systemd -u your_user --hp /home/your_user
```

---

## ЁЯЪА 4я╕ПтГг р╕гр╕╡р╕Ър╕╣р╕Хр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З р╣Бр╕ер╣Йр╕зр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ PM2 р╕гр╕▒р╕Щр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤

р╕гр╕╡р╕кр╕Хр╕▓р╕гр╣Мр╕Чр╣Ар╕Лр╕┤р╕гр╣Мр╕Яр╣Ар╕зр╕нр╕гр╣М:

```bash
sudo reboot
```

р╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Бр╕Ър╕╣р╕Хр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╣Гр╕лр╕бр╣И р╣Гр╕лр╣Йр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ PM2 р╕зр╣Ир╕▓р╕вр╕▒р╕Зр╕гр╕▒р╕Щр╕нр╕вр╕╣р╣Ир╕лр╕гр╕╖р╕нр╣Др╕бр╣И:

```bash
pm2 list
```

---

## ЁЯЪА 5я╕ПтГг р╣Гр╕Кр╣Йр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Ир╕▒р╕Фр╕Бр╕▓р╕г PM2

### ЁЯФД р╕гр╕╡р╕кр╕Хр╕▓р╕гр╣Мр╕Чр╕Бр╕гр╕░р╕Ър╕зр╕Щр╕Бр╕▓р╕г

```bash
pm2 restart all
```

р╕лр╕гр╕╖р╕нр╕гр╕╡р╕кр╕Хр╕▓р╕гр╣Мр╕Чр╣Ар╕Йр╕Юр╕▓р╕░р╣Ар╕Лр╕┤р╕гр╣Мр╕Яр╣Ар╕зр╕нр╕гр╣М:

```bash
pm2 restart udp-server
pm2 restart http-server
```

### тЭМ р╕лр╕вр╕╕р╕Фр╕Бр╕гр╕░р╕Ър╕зр╕Щр╕Бр╕▓р╕г

```bash
pm2 stop all
```

р╕лр╕гр╕╖р╕нр╕лр╕вр╕╕р╕Фр╣Ар╕Йр╕Юр╕▓р╕░:

```bash
pm2 stop udp-server
```

### ЁЯЧС р╕ер╕Ър╕Бр╕гр╕░р╕Ър╕зр╕Щр╕Бр╕▓р╕г

```bash
pm2 delete all
```

р╕лр╕гр╕╖р╕н:

```bash
pm2 delete udp-server
```

---

## ЁЯОп р╕кр╕гр╕╕р╕Ы

тЬЕ р╣Гр╕Кр╣Й **PM2** р╣Гр╕лр╣Йр╕гр╕▒р╕Щ **index.js** р╣Бр╕ер╕░ **server.js** р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤  
тЬЕ р╕гр╕▒р╕Щр╕лр╕ер╕▒р╕Зр╕гр╕╡р╕Ър╕╣р╕Хр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З  
тЬЕ р╣Гр╕Кр╣Йр╕Др╕│р╕кр╕▒р╣Ир╕З `pm2 list`, `pm2 restart`, `pm2 stop`, `pm2 delete` р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╣Ар╕Лр╕┤р╕гр╣Мр╕Яр╣Ар╕зр╕нр╕гр╣М

---
